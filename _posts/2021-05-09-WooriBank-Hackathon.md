---
layout: post
title: "우리은행 해커톤(2021년 5월 9일)"
date: 2021-05-09 17:20:23 +0900
category: Hackathon
---

# WooriBank-hackathon

# 서류 합격

![WooriBankHack](https://user-images.githubusercontent.com/26592315/150896488-7b84ee39-4f42-4da7-9cfe-374b103b4acd.png){: width="50%" height="50%"}{: .center}

## 프로그램 명칭

WibeeRich

---

## 본프로그램의 특징

위비리치(WibeeRich)는 고객의 소비내역을 실시간으로 분석하여 제시하고, 향후 소비패턴을 예측해 합리적인 소비습관을 형성하여 현명한 소비를 돕는 자산관리 어플리케이션입니다. 위비리치는 2030 고객에 초점을 맞추어 우리계좌, 우리카드 관련 금융서비스를 제공합니다.

1. 자기관리, 간편함을 추구하는 2030의 라이프스타일을 기반으로 ‘배달’, ‘편의점’, ‘운동’, ‘고정지출’, ‘택시’, ‘대중교통’ 등의 소비항목 분류 카테고리를 세분화했습니다.
2. 동일 연령대, 비슷한 자산규모를 가진 고객 그룹화를 통해 고객의 소비패턴을 시각화하여 보다 더 와닿는 분석 결과를 제공합니다.
3. 매달 분석된 소비패턴을 바탕으로 사용자에게 맞는 우리카드를 추천하고, 구독서비스 자동지출을 관리합니다.

## WibeeRich 기능

1. MY계좌

   - 사용자는 본인이 가진 계좌에서 원하는 계좌를 선택해 조회를 요청할 수 있습니다.
   - 이용내역 조회 시 일정한 기간동안 사용한 거래내역 데이터가, 카테고리에 맞게 분류되어 정렬된 것을 확인할 수 있습니다.
   - 계좌 정보 조회 시 거래내역을 조회하는 통장의 정보를 확인할 수 있습니다.
   - 조회할 계좌의 잔액이 사용자가 설정한 금액 이하일 경우 알림을 받을 수 있습니다.

2. 캘린더

   - 사용자의 거래내역을 달력에 표기해 거래내역을 일별로 확인할 수 있습니다.
   - 일별 거래 데이터의 건수, 총 금액이 표현됩니다.
   - 카테고리 분류결과가 잘못된 경우 수정할 수 있습니다.

3. 리포트

   - 소비내역을 분석한 주간, 월간 리포트의 열람이 가능합니다.
   - 이전 주의 소비 금액과 이번 주의 소비 금액을 비교해 일주일간 사용 금액 변화 추이를 볼 수 있습니다.
   - 카테고리별로 사용한 금액을 분류해 지출을 가장 많이 한 카테고리를 확인할 수 있습니다.
   - 막대그래프로 요일별 사용 금액을 확인할 수 있습니다.
   - 성별과 나이로 이루어진 그룹과 나의 소비를 비교할 수 있습니다.

4. 카드추천

   - 분석된 소비 패턴을 기반으로 우리은행의 카드를 추천받을 수 있습니다.

5. 크롤러/분류알고리즘
   - 우선 DB내에 있는 거래내역에서 카테고리가 아직 분류되지 않은 거래처명들을 확인합니다.
   - 이후 해당 거래처명들을 카테고리를 분류 알고리즘을 이용해 카테고리를 확인한 뒤에 다시 DB의 거래처명에 맞는 카테고리를 넣어줍니다.

## 분류알고리즘

- 사용처 분류 기준 정의를 2030 세대에 특화된 우리만의 분류기준으로 독자적으로 정의했습니다.
  2030 세대의 지출이 집중되는 배달, 온라인 쇼핑, 오프라인 쇼핑, 택시, 편의점, 서비스 구독, 운동 등을 소분류에서 꺼내서 독자적인 카테고리로 정의를 하였으며, 이후 고정비 지출이나 구독 서비스 관리 부분도 고려했습니다. 이 외에도 17개의 추가적인 카테고리를 설정을 했습니다.
  25가지로 상세히 카테고리로 구분을 짓고 나니, String으로 받은 값으로는 구분하기가 복잡하다는 것을 알게 되었고, 그에 대한 해결책으로 여러가지 오픈 API와 크롤링으로 긁어온 텍스트에서
  TF점수를 계산하고 상위 10개에 해당하는 것들에 대해서 또 다시 분류를 해주었습니다.
  또한 오픈 API와 텍스트 마이닝을 통해 유용한 정보를 추출하는 방식의 단점을 보완하기 위해서 첫 layer로 String의 특징을 가지고 분류를 하였습니다.

#### 분류 알고리즘을 다시 상세히 하자면,

세 단계의 layer가 있습니다.

**1. 첫번째 layer에서는 카테고리를 구분하기에 명확한 카테고리 순으로 String으로 처리를 해줬습니다. 예를 들어 ‘우아한 형제들’, ‘넷플릭스’ 처럼 명확한 카테고리 들은 첫 layer에서 거르도록 했습니다.**

**2. 두번째 layer에서는 네이버 Search 지역검색 API를 이용해서 미리 분류된 카테고리를 이용하여 저희가 구분한 기준에 맞게 분류를 하였습니다.**

**3. 두번째 layer에서 검색이 되지 않는 String이나 검색이 잘못 된 경우에는 해당 String을 네이버 웹문서와 블로그에서 검색을 하여 가져온 text들을 전처리 하고 나서 단어나 어절의 등장횟수로 TF점수를 매겨 키워드를 추출 하였습니다. 그렇게 해서 나온 키워드를 가지고 마지막 분류를 해주어서 정확도를 높였습니다.**

[알고리즘 코드](https://github.com/SonHyeono/Woori-hackathon/blob/main/%EB%B6%84%EB%A5%98%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98%EC%BD%94%EB%93%9C.py)

> - 3개의 layer로 분류를 하고 MySQL에 집어 넣는 과정 까지의 코드

---

900개의 데이터 셋을 가지고 정확도를 구해보았습니다.

우리은행 홈페이지에서 거래내역조회를 뽑게 되면 기재내용으로 나오는 TRN_TXT string이 온전하게 나오는 것이 아닌, 잘려서 나오기에 정확도를 높이는 데 한계가 있었습니다.

![image](https://user-images.githubusercontent.com/26592315/150895397-0d059a92-b5d3-4d3c-bb02-0af3e351846b.png){: width="100%" height="100%"}{: .center}

- 정확도의 경우는 83% 정도이며 지금까지 설명한 분류 방법이 외에도 검색에 있어서 정확성을 높이기 위해 String에서 유효한 값으로 분할 혹은 재조합으로 검색을 하거나 검색해서 나온 키워드의 정확성을 높이는 방법으로 현재의 정확도를 높일 수 있을 것 같습니다.

## 사용방법

각 화면의 전환은 하단바를 이용해 원하는 페이지로 이동할 수 있습니다.

MY계좌

- 이용내역 조회 버튼을 누르면 페이지가 새롭게 펼쳐지며 시간순으로 정렬된 데이터를 볼 수 있습니다
- 계좌 정보 조회 클릭 시 다이얼로그가 떠 해당 다이얼로그에서 계좌 상세 정보를 확인할 수 있습니다.
- 조회할 계좌의 잔액이 사용자가 설정한 금액 이하일 경우, 기기의 상단바에 알림이 뜬 것을 확인할 수 있습니다.

캘린더

- 기본적으로는 오늘 날짜로 선택되어 있으며, 원하는 날을 클릭하면 해당 날의 거래내역을 확인할 수 있습니다.
- 카테고리 오분류된 거래내역을 두 번 클릭하면 카테고리를 새롭게 선택해 수정할 수 있습니다.

리포트

- 열람하고자 하는 리포트를 클릭하면 새롭게 열린 액티비티에서 해당 기간 동안의 금융 리포트를 확인할 수 있습니다.

카드추천

- 페이지 이동 시 추천된 카드의 정보를 알 수 있습니다.

---

## 느낀점

- 금융 서비스에 무엇이 필요할까 팀원들과 고민도 해보며 소비내역에 대한 서비스를 만들고자 [금융 데이터셋인 카드 사용내역](https://github.com/SonHyeono/Woori-hackathon/tree/main/raw_dataset)도 직접 지인들에게 연락을해서 수집도 하고 그에 맞게 카테고리 별로 분류를 하는 알고리즘을 직접 만들어서 데이터를 분류를 하고 DB에 저장후에 앱에서 그 데이터를 꺼낼 수 있도록 하였습니다.

- 이러한 과정 속에서 금융 데이터에 대한 가치와 소중함을 알게 되었고 이러한 데이터를 이용하는 데이터 분석가가 되고 싶어졌습니다.

---
